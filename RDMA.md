# RDMA

- 可靠的用户级别的远程内存读写
- 绕过内核
  - 避免复杂协议栈的开销
  - 仅使用远程NIC进行远程内存访问，而无需使用远程CPU


RDMA请求通过可靠的连接（也称为队列对）发送，而网络故障则显示为终止的连接。请求直接发送到NIC，而不涉及内核，并且由远程NIC处理且不会中断CPU。必须先向NIC注册内存区域，然后才能将其用于远程访问。在注册期间，NIC驱动程序将页面固定在物理内存中，将虚拟页面到物理页面的映射存储在NIC的页面表中，并返回客户可以用来访问区域的region capability。当NIC收到RDMA请求时，它将获得目标区域的页表，将目标偏移量和大小映射到相应的物理页中，并使用DMA访问内存。许多NIC（包括我们正在使用的NIC）保证以递增的地址顺序执行RDMA写入（但不读取）。 DMA操作在我们的硬件平台上是缓存一致的。

NIC的页表和连接数据的内存有限。因此，许多NIC（包括我们的NIC）将此信息存储在系统内存中，并将NIC内存用作高速缓存。访问未缓存的信息需要发出DMA，以通过PCI总线从系统内存中获取信息。这是卸载技术的普遍局限，需要仔细使用可用内存才能获得良好的性能。

